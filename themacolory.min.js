let themaInfor=[];function showString(e){console.log("==="+e+"===")}let sortPriority=[3,4,5,0,1,2],sortPriDesc=[!0,!0,!0,!0,!0,!0];function sortTuple(e,t){for(let n=0;n<sortPriority.length;n++){let o=e[sortPriority[n]],r=t[sortPriority[n]];if(o>r)return 1==sortPriDesc[n]?-1:1;if(o<r)return 1==sortPriDesc[n]?1:-1}return 0}var allText;let contPerLocation,contPerShop,contPerThema,vecLocName=[];const LOCATION=0,SHOP=1,TITLE=2,RATE=3,DIFF=4,COUNT=5;function loadFromFile(){let e=new XMLHttpRequest;e.open("GET","Colory Room Escape.html",!1),e.setRequestHeader("Content-Type","text/html;charset=utf-8"),e.onreadystatechange=function(){4===e.readyState&&(200!==e.status&&0!=e.status||(allText=e.responseText))},e.send(null),contPerLocation=allText.split('<h5 class="select-area">');for(let e=1;e<contPerLocation.length;e++){let t=contPerLocation[e].substr(0,contPerLocation[e].indexOf("</h5>"));vecLocName.push(t),contPerShop=contPerLocation[e].split('class="info-1">');for(let e=2;e<contPerShop.length;e++){let n=contPerShop[e].substr(0,contPerShop[e].indexOf("</td>"));contPerThema=contPerShop[e].split("</tr>");for(let e=0;e<contPerThema.length-1;e++){let o=contPerThema[e].indexOf("info-2"),r=contPerThema[e].substr(o+8,contPerThema[e].indexOf("</td>",o)-o-8),a=contPerThema[e].indexOf("info-3"),i=contPerThema[e].indexOf(">",a),c=contPerThema[e].substr(i+1,contPerThema[e].indexOf("</td>",a)-i-1),l=contPerThema[e].indexOf("info-4"),m=contPerThema[e].substr(l+8,contPerThema[e].indexOf("</td>",l)-l-8),s=contPerThema[e].indexOf("info-5"),d=contPerThema[e].substr(s+8,contPerThema[e].indexOf("</td>",s)-s-8),u=[];u[LOCATION]=t,u[SHOP]=n,u[TITLE]=r,u[RATE]=Number(c),u[DIFF]=Number(m),1==isNaN(u[DIFF])&&(u[DIFF]=0),u[COUNT]=Number(d),themaInfor.push(u)}}}}loadFromFile();let satisfiedEntries,mapLoc={},queryLoc={};function funcDrawInit(){let e=0,t=10,n=0,o=1e5,r=0,a=10;for(let i=0;i<themaInfor.length;i++)e<themaInfor[i][RATE]&&(e=themaInfor[i][RATE]),t>themaInfor[i][RATE]&&(t=themaInfor[i][RATE]),n<themaInfor[i][COUNT]&&(n=themaInfor[i][COUNT]),o>themaInfor[i][COUNT]&&(o=themaInfor[i][COUNT]),r<themaInfor[i][DIFF]&&(r=themaInfor[i][DIFF]),a>themaInfor[i][DIFF]&&(a=themaInfor[i][DIFF]);let i=document.getElementById("tdLocationContents");for(let e=0;e<vecLocName.length;e++){let t=document.createElement("input");t.type="checkbox",t.onclick=function(t){1==t.target.checked?queryLoc[vecLocName[e]]=!0:queryLoc[vecLocName[e]]=!1},0==e&&(queryLoc[vecLocName[e]]=!0,t.checked=!0),i.appendChild(t);let n=document.createElement("span");n.innerHTML=vecLocName[e]+" ",i.appendChild(n),e%6==5&&(i.appendChild(document.createElement("br")),i.appendChild(document.createElement("br")))}document.getElementById("spanRateMin").innerHTML=t,document.getElementById("spanRateMax").innerHTML=e,document.getElementById("spanDiffMin").innerHTML=a,document.getElementById("spanDiffMax").innerHTML=r,document.getElementById("spanCountMin").innerHTML=o,document.getElementById("spanCountMax").innerHTML=n;{let n=document.getElementById("rangeRateMin");n.min=10*t,n.max=10*e,n.value=10*t;let o=document.getElementById("rangeRateMax");o.min=10*t,o.max=10*e,o.value=10*e}{let e=document.getElementById("rangeDiffMin");e.min=1*a,e.max=1*r,e.value=1*a;let t=document.getElementById("rangeDiffMax");t.min=1*a,t.max=1*r,t.value=1*r}{let e=document.getElementById("rangeCountMin");e.min=1*o,e.max=1*n,e.value=1*o;let t=document.getElementById("rangeCountMax");t.min=1*o,t.max=1*n,t.value=1*n}}function funcInputVal(e,t){let n=prompt("value"),o=document.getElementById(e.id.replace("span","range"));1==isNaN(n)||n*t<o.min||n*t>o.max||(e.innerHTML=n,o.value=n*t)}function funcChangeVal(e,t){document.getElementById(e.id.replace("range","span")).innerHTML=e.value/t}function funcSetSortPri(e){let t=sortPriority[0];(sortPriority=[0])[0]=t,sortPriority[0]==e?sortPriDesc[0]=!sortPriDesc[0]:(sortPriority[0]=e,sortPriDesc[0]=!0),console.log("clicked"),funcDrawResult()}funcDrawInit();let headContents=["위치","매장","테마","평점","난이도","후기수"];function funcDrawResult(){let e=document.getElementById("tabResult");for(;e.childElementCount>0;)e.removeChild(e.children[0]);if(0==satisfiedEntries.length)return void alert("해당 테마가 없습니다!");satisfiedEntries.sort(sortTuple);let t=document.createElement("tr");t.className="result";for(let e=0;e<headContents.length;e++){let n=document.createElement("th");n.className="result",sortPriority[0]==e?1==sortPriDesc[0]?n.innerHTML=headContents[e]+"↓":n.innerHTML=headContents[e]+"↑":n.innerHTML=headContents[e],n.onclick=function(){funcSetSortPri(e)},t.appendChild(n)}e.appendChild(t);for(let t=0;t<satisfiedEntries.length&&100!=t;t++){let n=document.createElement("tr");n.className="result",e.appendChild(n);for(let e=0;e<=COUNT;e++){let o=document.createElement("td");o.className="result",o.innerHTML=satisfiedEntries[t][e],n.appendChild(o)}}}function funcEval(){let e=Number(document.getElementById("spanRateMin").innerHTML),t=Number(document.getElementById("spanRateMax").innerHTML),n=Number(document.getElementById("spanDiffMin").innerHTML),o=Number(document.getElementById("spanDiffMax").innerHTML),r=Number(document.getElementById("spanCountMin").innerHTML),a=Number(document.getElementById("spanCountMax").innerHTML);if(console.log(t,e,a,r,o,n),t<e||a<r||o<n)alert("입력을 확인해주세요!");else{satisfiedEntries=[];for(let i=0;i<themaInfor.length;i++)themaInfor[i][RATE]<e||themaInfor[i][RATE]>t||themaInfor[i][COUNT]<r||themaInfor[i][COUNT]>a||themaInfor[i][DIFF]<n||themaInfor[i][DIFF]>o||1==queryLoc[themaInfor[i][LOCATION]]&&satisfiedEntries.push(themaInfor[i]);funcDrawResult()}}
