let themaInfor=[];function showString(e){console.log("==="+e+"===")}let sortPriority=[3,4,5,0,1,2],sortPriDesc=[!0,!0,!0,!0,!0,!0];function sortTuple(e,t){for(let n=0;n<sortPriority.length;n++){let r=e[sortPriority[n]],o=t[sortPriority[n]];if(sortPriority[n]>=3&&(1==isNaN(r)&&(r=0),1==isNaN(o)&&(o=0)),r>o)return 1==sortPriDesc[n]?-1:1;if(r<o)return 1==sortPriDesc[n]?1:-1}return 0}let vecLocName=[];const LOCATION=0,SHOP=1,TITLE=2,RATE=3,DIFF=4,COUNT=5;function loadFromFile(){let e,t,n,r,o=new XMLHttpRequest;o.open("GET","Colory Room Escape.html",!1),o.setRequestHeader("Content-Type","text/html;charset=utf-8"),o.onreadystatechange=function(){4===o.readyState&&(200!==o.status&&0!=o.status||(e=o.responseText))},o.send(null),t=e.split('<h5 class="select-area">');for(let e=1;e<t.length;e++){let o=t[e].substr(0,t[e].indexOf("</h5>"));vecLocName.push(o),n=t[e].split('class="info-1">');for(let e=2;e<n.length;e++){let t=n[e].substr(0,n[e].indexOf("</td>"));r=n[e].split("</tr>");for(let e=0;e<r.length-1;e++){let n=r[e].indexOf("info-2"),a=r[e].substr(n+8,r[e].indexOf("</td>",n)-n-8),i=r[e].indexOf("info-3"),l=r[e].indexOf(">",i),s=r[e].substr(l+1,r[e].indexOf("</td>",i)-l-1),m=r[e].indexOf("info-4"),c=r[e].substr(m+8,r[e].indexOf("</td>",m)-m-8),d=r[e].indexOf("info-5"),u=r[e].substr(d+8,r[e].indexOf("</td>",d)-d-8),f=[];f[LOCATION]=o,f[SHOP]=t,f[TITLE]=a,f[RATE]=Number(s),f[DIFF]=Number(c),f[COUNT]=Number(u),themaInfor.push(f)}}}}loadFromFile();let satisfiedEntries,mapLoc={},queryLoc={};function funcDrawInit(){let e=0,t=10,n=0,r=1e5,o=0,a=10;for(let i=0;i<themaInfor.length;i++)e<themaInfor[i][RATE]&&(e=themaInfor[i][RATE]),t>themaInfor[i][RATE]&&(t=themaInfor[i][RATE]),n<themaInfor[i][COUNT]&&(n=themaInfor[i][COUNT]),r>themaInfor[i][COUNT]&&(r=themaInfor[i][COUNT]),o<themaInfor[i][DIFF]&&(o=themaInfor[i][DIFF]),a>themaInfor[i][DIFF]&&(a=themaInfor[i][DIFF]);let i=document.getElementById("tdLocationContents");for(let e=0;e<vecLocName.length;e++){let t=document.createElement("input");t.type="checkbox",t.onclick=function(t){1==t.target.checked?queryLoc[vecLocName[e]]=!0:queryLoc[vecLocName[e]]=!1},0==e&&(queryLoc[vecLocName[e]]=!0,t.checked=!0),i.appendChild(t);let n=document.createElement("span");n.innerHTML=vecLocName[e]+" ",i.appendChild(n),e%6==5&&(i.appendChild(document.createElement("br")),i.appendChild(document.createElement("br")))}document.getElementById("spanRateMin").innerHTML=t,document.getElementById("spanRateMax").innerHTML=e,document.getElementById("spanDiffMin").innerHTML=a,document.getElementById("spanDiffMax").innerHTML=o,document.getElementById("spanCountMin").innerHTML=r,document.getElementById("spanCountMax").innerHTML=n;{let n=document.getElementById("rangeRateMin");n.min=10*t,n.max=10*e,n.value=10*t;let r=document.getElementById("rangeRateMax");r.min=10*t,r.max=10*e,r.value=10*e}{let e=document.getElementById("rangeDiffMin");e.min=1*a,e.max=1*o,e.value=1*a;let t=document.getElementById("rangeDiffMax");t.min=1*a,t.max=1*o,t.value=1*o}{let e=document.getElementById("rangeCountMin");e.min=1*r,e.max=1*n,e.value=1*r;let t=document.getElementById("rangeCountMax");t.min=1*r,t.max=1*n,t.value=1*n}}function funcInputVal(e,t){let n=prompt("value"),r=document.getElementById(e.id.replace("span","range"));1==isNaN(n)||n*t<r.min||n*t>r.max||(e.innerHTML=n,r.value=n*t)}function funcChangeVal(e,t){document.getElementById(e.id.replace("range","span")).innerHTML=e.value/t}function funcSetSortPri(e){let t=sortPriority[0];(sortPriority=[0])[0]=t,sortPriority[0]==e?sortPriDesc[0]=!sortPriDesc[0]:(sortPriority[0]=e,sortPriDesc[0]=!0),console.log("clicked"),funcDrawResult()}funcDrawInit();let headContents=["위치","매장","테마","평점","난이도","후기수"];function funcDrawResult(){let e=document.getElementById("tabResult");for(;e.childElementCount>0;)e.removeChild(e.children[0]);if(0==satisfiedEntries.length)return void alert("해당 테마가 없습니다!");satisfiedEntries.sort(sortTuple);let t=document.createElement("tr");t.className="result";for(let e=0;e<headContents.length;e++){let n=document.createElement("th");n.className="result",sortPriority[0]==e?1==sortPriDesc[0]?n.innerHTML=headContents[e]+"↓":n.innerHTML=headContents[e]+"↑":n.innerHTML=headContents[e],n.onclick=function(){funcSetSortPri(e)},t.appendChild(n)}e.appendChild(t);for(let t=0;t<satisfiedEntries.length&&100!=t;t++){let n=document.createElement("tr");n.className="result",e.appendChild(n);for(let e=0;e<=COUNT;e++){let r=document.createElement("td");r.className="result",r.innerHTML=satisfiedEntries[t][e],n.appendChild(r)}}}function funcEval(){let e=Number(document.getElementById("spanRateMin").innerHTML),t=Number(document.getElementById("spanRateMax").innerHTML),n=Number(document.getElementById("spanDiffMin").innerHTML),r=Number(document.getElementById("spanDiffMax").innerHTML),o=Number(document.getElementById("spanCountMin").innerHTML),a=Number(document.getElementById("spanCountMax").innerHTML);if(console.log(t,e,a,o,r,n),t<e||a<o||r<n)alert("입력을 확인해주세요!");else{satisfiedEntries=[];for(let i=0;i<themaInfor.length;i++)themaInfor[i][RATE]<e||themaInfor[i][RATE]>t||themaInfor[i][COUNT]<o||themaInfor[i][COUNT]>a||themaInfor[i][DIFF]<n||themaInfor[i][DIFF]>r||(0==e&&10==t||1!=isNaN(themaInfor[i][RATE]))&&(0==n&&10==r||1!=isNaN(themaInfor[i][DIFF]))&&1==queryLoc[themaInfor[i][LOCATION]]&&satisfiedEntries.push(themaInfor[i]);funcDrawResult()}}
